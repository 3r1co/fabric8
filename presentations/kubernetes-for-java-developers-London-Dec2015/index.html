<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>easy micro services with fabric8, docker and kubernetes</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/simple.css" id="theme">
  <!--
      <link rel="stylesheet" href="css/theme/default.css" id="theme">
  -->

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <style>
.reveal section img {
  border: 0px;
  box-shadow: 0 0 0px;
}
  </style>


  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
    document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section>
  <h2>Kubernetes for Developers</h2>

  <h3>with OpenShift and Fabric8</h3>

  <p>
    <small>Created by <a href="http://macstrac.blogspot.co.uk/">James Strachan</a> / <a
            href="http://twitter.com/jstrachan">@jstrachan</a> from <a href="http://redhat.com/">Red Hat</a></small>
  </p>
</section>


<section>
  <h2>How can we deliver business value faster?</h2>
  <p>despite increasing complexity, technologies, requirements and scale?</p>
</section>

<section>
  <h2>Microservices / DevOps</h2>
  <ul>
    <li class="fragment">
      refactor monolith software into separate microservices
      <ul>
        <li>each microservice has its own release cycle</li>
      </ul>
      </li>
    <li class="fragment">
      refactor monolith team into separate teams
      <ul>
        <li>one team per microservice for Dev + Test + Ops</li>
        <li>2 pizza rule rather than Mythical Man month</li>
      </ul>
    </li>
    <li class="fragment">
      automate everything
      <ul>
        <li>immutable infrastructure</li>
        <li>Continous Integration / Delivery / Deployment / Improvement</li>
      </ul>
    </li>
  </ul>
</section>

<section>
  <h2>Why DevOps is important:</h2>
  <div align="centre">
    <img src="images/deploys-graph.png" height="600" width="1000">
  </div>
  <div align="centre">
    <p>
  https://puppetlabs.com/blog/2015-state-devops-report-here
  </p>
</div>
</section>

<section>
  <div align="centre">
    <img src="images/kube-hot.jpg" height="800" >
  </div>
</section>

<section>
  <h2>Kubernetes</h2>
  <ul>
    <li>the ideal microservices platform:
  <ul>
    <li>self service platform for developers</li>
    <li>each team / microservice / environment can work in their own <i>namespace</i></li>
    <li>release any microservice in any namespace at any time</li>
  </ul>
</li>
</ul>

</section>


<section>
  <h2>Kubernetes: sub atomic particles</h2>
  <p>
    <ul>
      <li>Pods</li>
      <li>Replication Controllers</li>
      <li>Services</li>
    </ul>
  </p>
</section>

<section>
  <h2>Pod</h2>
  <p>
    <ul>
      <li>for a Java person, just think JVM with: </li>
      <ul>
        <li>environment variables</li>
        <li>ports</li>
        <li>volumes</li>
      </ul>
      <li>each Pod has its own unique IP address</li>
    </ul>
  </p>
</section>

<section>
  <pre class="stretch"><code data-trim>
apiVersion: "v1"
kind: "ReplicationController"
metadata:
  name: "elasticsearch"
spec:
  replicas: 1
  selector:
    component: "elasticsearch"
    provider: "fabric8"
  template:
    metadata:
      labels:
        component: "elasticsearch"
        provider: "fabric8"
    spec:
      containers:
        -
          name: "elasticsearch"
          image: "fabric8/elasticsearch-k8s:1.5.2"
          env:
            -
              name: "SERVICE_DNS"
              value: "elasticsearch-cluster"
          ports:
            -
              containerPort: 9200
              name: "http"
</code></pre>
<p>Replication Controller</p>
</section>

<section>
  <h2>Service</h2>
  <ul>
    <li>each service has its own unique IP address</li>
  </ul>
  <pre><code data-trim>
apiVersion: "v1"
kind: "Service"
metadata:
  name: "elasticsearch"
  labels:
    component: "elasticsearch"
    provider: "fabric8"
spec:
  ports:
    -
      port: 80
      targetPort: 9200
  selector:
    component: "elasticsearch"
    provider: "fabric8"
</code></pre>
</section>

<section>
  <h2>Service</h2>
  <ul>
    <li>services can be implmemented:
      <ul>
        <li>internally using <b>pod selectors</b></li>
        <li>externally or aliased by creating <b>Endpoints</b></li>
      </ul>
    </li>
    <li>services are visible internally and can be exposed externally</li>
      <ul>
        <li>GKE: &nbsp;&nbsp;<code>type: LoadBalancer</code></li>
        <li>OpenShift: &nbsp;<code>oc expose service foo</code></li>
      </ul>
    </li>
  </ul>
</section>

<section>
  <h2>Service Discovery</h2>
  <p>
    for a service called <b>foo-bar</b> here is how you discover to it:
    <ul>
      <li>http://foo-bar/</li>
      <li>https://foo-bar/</li>
    </ul>
  </p>
  <p>
    Works nicely for different namespaces / environments without code or config change!
  </p>
  <p>
    DNS FTW!
  </p>
</section>

<section>
  <h2>Kubernetes: sub atomic particles</h2>
  <p>
    <ul>
      <li>Pods</li>
      <li>Replication Controllers</li>
      <li>Services</li>
    </ul>
  </p>
</section>

<section>
  <h2>Tools</h2>
  <ul>
    <li>kubectl get pods</li>
    <li>kubectl delete pod foo-abc234</li>
    <li>kubectl create -f foo.json</li>
  </ul>
</section>


<section>
  <h2>Microservice on Kubernetes?</h2>
  <p>
    each microservice typically has:
    <ul>
      <li>Replication Controller</li>
      <li>Service</li>
    </ul>
  </p>
</section>

<section>
  <h2>Develop microservices on Kubernetes</h2>
  <p>
    <ul>
      <li>Write some code</li>
      <li>Put code into docker image</li>
      <li>Create kubernetes metadata</li>
      <li>Apply the metadata to an environment</li>
      <li>Resize and rolling upgrades</li>
      <li>CI / CD can automate the above ;)</li>
    </ul>
  </p>
</section>


<section>
  <h2>Fabric8</h2>
  <p>
    <a href="https://fabric8.io/">https://fabric8.io/</a>
  </p>
  <div align="centre">
    <img src="images/fabric8.svg" height="500" width="500">
  </div>
</section>


<section>
  <h2>What is Fabric8?</h2>
  <p>
    <ul>
      <li>
        Integration Platform that runs on top of Kubernetes (iPaaS)
      </li>
      <li>
        Implemented as modular microservices
      </li>
      <li>Also includes:
        <ul>
          <li>Continuous Delivery Platform</li>
          <li>ChatOps, Chaos Monkey &amp; Angry Pods</li>
          <li>Management: (Console, Logging, Metrics)</li>
        </ul>
      </li>
    </ul>
  </p>
</section>

<section>
  <h2>Fabric8 Console</h2>
  <div align="centre">
    <img src="images/project-overview.png" height="600" width="1000">
  </div>
  <p>
    <a href="https://fabric8.io/">https://fabric8.io/</a>
  </p>
</section>

<section>
  <h2>Fabric8: Java Tools</h2>
  <p>
    <ul>
      <li>Maven plugins for docker &amp; kubernetes</li>
      <li>Integration Testing on Kubernetes
        <ul>
          <li>Arquillian plugin for JUnit</li>
        </ul>
      </li>
      <li>Dependency Injection for CDI and Spring
      </li>
      <li>Java Libraries for working with Kubernetes</li>
    </ul>
  </p>
</section>


<section>
  <h2>Maven Plugins</h2>
<p>
  build docker image:
</p>
<div align="left">
<pre>
<code>
$  mvn docker:build

</code>
</pre>
</div>
<p>
  generate kubernetes resources:
</p>
<div align="left">
<pre>
<code>
$  mvn fabric8:json

</code>
</pre>
</div>
  <p>
    apply resources to kubernetes:
  </p>
<div align="left">
<pre>
<code>
$  mvn fabric8:apply

</code>
</pre>
</div>
</section>

<section>
  <h2>System / Integration Testing</h2>
<div align="centre">
  <img src="images/arqtest.png" height="650" width="1200">
</div>
  <p>
    <a href="http://fabric8.io/guide/testing.html">http://fabric8.io/guide/testing.html</a>
  </p>
</section>

<section>
  <h2>Pre-commit!</h2>
  <p>
    <ul>
      <li>Have single node Kubernetes VM on your laptop</li>
      <li>Treat it kinda like an <i>application server</i></li>
      <li>Get rapid developer flow:</li>
    </ul>
  </p>
  <p>
  <code>
    <pre>

      mvn docker:build docker:watch
    </pre>
  </code>
</p>
<p>
  soon using the new <code>oc sync</code> command for faster sync to docker container!
</p>
<p>
  eclipse tooling coming in JBDS &amp; the CDK...
</p>
</section>


<section>
  <h2>Summary</h2>
  <p>
    <ul>
      <li>use CI / CD <b>post commit</b>:
        <ul>
          <li>automate the movement code and config through environments</li>
        </ul>
       </li>
       <li>optimise <b>pre-commit</b> development flow</li>
      <li>discover services via DNS:
        <ul>
          <li>no code or config change per environment</li>
        </ul>
        </li>
      <li>fabric8 arquillian for system/integration testing on kubernetes</li>
    </ul>
  </p>
</section>

<section>
  <h2>Any questions?</h2>
  <table>
    <tr>
      <td>
        <a href="https://kubernetes.io/">kubernetes.io</a>
      </td>
      <td>
        orchestrate your containers
      </td>
    </tr>
    <tr>
      <td>
        <a href="https://openshift.org/">openshift.org</a>
      </td>
      <td>
        kubernetes based PaaS
      </td>
    </tr>
    <tr>
      <td>
        <a href="http://fabric8.io/">fabric8.io</a>
      </td>
      <td>
        Integration &amp; CI / CD Platform for k8s
      </td>
    </tr>
  </table>

  <!--
  <li>
    <a href="http://hawt.io/">http://hawt.io/</a>
  </li>
-->

  <div align="center">
    <a href="http://twitter.com/jstrachan">@jstrachan</a>
  </div>

</section>

<section>
  <h2>CDI / Spring</h2>
<div align="centre">
  <img src="images/cdi.png" height="650" width="800">
</div>
  <p>
    <a href="http://fabric8.io/guide/cdi.html">http://fabric8.io/guide/cdi.html</a>
  </p>
</section>


</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,

    theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
    //transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
    transition: 'linear',

    // Parallax scrolling
    // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
    // parallaxBackgroundSize: '2100px 900px',

    // Optional libraries used to extend on reveal.js
    dependencies: [
      { src: 'lib/js/classList.js', condition: function () {
        return !document.body.classList;
      } },
      { src: 'plugin/markdown/marked.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      } },
      { src: 'plugin/markdown/markdown.js', condition: function () {
        return !!document.querySelector('[data-markdown]');
      } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
        hljs.initHighlightingOnLoad();
      } },
      { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
        return !!document.body.classList;
      } },
      { src: 'plugin/notes/notes.js', async: true, condition: function () {
        return !!document.body.classList;
      } }
    ]
  });

</script>

</body>
</html>
