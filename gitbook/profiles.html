<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Profiles | Fabric8 Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="./agent.html" />
    
    
    <link rel="prev" href="./registry.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">

    
    <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-anchors/plugin.css">
    


        
    <div class="book" data-level="4.2" data-basepath="." data-revision="1446911011244">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="overview.html">
            
                
                    <a href="./overview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Overview
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="getStarted.html">
            
                
                    <a href="./getStarted.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Get Started
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="quickstarts.html">
            
                
                    <a href="./quickstarts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         QuickStarts
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="environmentVariables.html">
            
                
                    <a href="./environmentVariables.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Environment Variables
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="developer.html">
            
                
                    <a href="./developer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Developing
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="developer.html">
            
                
                    <a href="./developer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Workflow
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="mavenPlugin.html">
            
                
                    <a href="./mavenPlugin.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         Maven Plugin
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="debugging.html">
            
                
                    <a href="./debugging.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                         Debugging
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4" data-path="arquillian.html">
            
                
                    <a href="./arquillian.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                         Arquillian
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.5" data-path="continuousDeployment.html">
            
                
                    <a href="./continuousDeployment.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                         Continuous Deployment
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.6" data-path="migration.html">
            
                
                    <a href="./migration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                         Migration
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="architecture.html">
            
                
                    <a href="./architecture.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Architecture
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="registry.html">
            
                
                    <a href="./registry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Registry
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="4.2" data-path="profiles.html">
            
                
                    <a href="./profiles.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         Profiles
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="agent.html">
            
                
                    <a href="./agent.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         Agent
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="git.html">
            
                
                    <a href="./git.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         Git
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.5" data-path="mavenProxy.html">
            
                
                    <a href="./mavenProxy.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                         Maven Proxy
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="containers.html">
            
                
                    <a href="./containers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Containers
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="childContainers.html">
            
                
                    <a href="./childContainers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         Child Containers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="microServices.html">
            
                
                    <a href="./microServices.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         Micro Services
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.3" data-path="javaContainer.html">
            
                
                    <a href="./javaContainer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                         Java Container
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.4" data-path="processContainer.html">
            
                
                    <a href="./processContainer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                         Process Container
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.5" data-path="springBootContainer.html">
            
                
                    <a href="./springBootContainer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                         Spring Boot Container
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.6" data-path="docker.html">
            
                
                    <a href="./docker.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                         Docker
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.7" data-path="kubernetes.html">
            
                
                    <a href="./kubernetes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                         Kubernetes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.8" data-path="sshContainers.html">
            
                
                    <a href="./sshContainers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                         SSH Containers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.9" data-path="openshift.html">
            
                
                    <a href="./openshift.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                         OpenShift
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.10" data-path="cloudContainers.html">
            
                
                    <a href="./cloudContainers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                         Cloud Containers
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="features.html">
            
                
                    <a href="./features.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         Features
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="gateway.html">
            
                
                    <a href="./gateway.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         Gateway
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2" data-path="requirements.html">
            
                
                    <a href="./requirements.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                         Auto Scaling
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.3" data-path="rollingUpgrade.html">
            
                
                    <a href="./rollingUpgrade.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                         Rolling Upgrade
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.4" data-path="osgiResolver.html">
            
                
                    <a href="./osgiResolver.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                         OSGi Resolver
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.5" data-path="offlineRepo.html">
            
                
                    <a href="./offlineRepo.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                         Offline Repository
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.6" data-path="partition.html">
            
                
                    <a href="./partition.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                         Partition
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.7" data-path="processManager.html">
            
                
                    <a href="./processManager.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                         Process Manager
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.8" data-path="security.html">
            
                
                    <a href="./security.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                         Security
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.9" data-path="propertyResolver.html">
            
                
                    <a href="./propertyResolver.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                         Property Resolver
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.10" data-path="urlHandlers.html">
            
                
                    <a href="./urlHandlers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.10.</b>
                        
                         URL Handlers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.11" data-path="insight.html">
            
                
                    <a href="./insight.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.11.</b>
                        
                         Insight
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="technologies.html">
            
                
                    <a href="./technologies.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Technologies
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="activemq.html">
            
                
                    <a href="./activemq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         Apache ActiveMQ
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1.1" data-path="brokerTopology.html">
            
                
                    <a href="./brokerTopology.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.1.</b>
                        
                         Broker Topology
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.2" data-path="brokerClients.html">
            
                
                    <a href="./brokerClients.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.2.</b>
                        
                         Broker Clients
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="camel.html">
            
                
                    <a href="./camel.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         Apache Camel
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.2.1" data-path="dataTransform.html">
            
                
                    <a href="./dataTransform.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.1.</b>
                        
                         Data Transform
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2.2" data-path="camelEndpointAmq.html">
            
                
                    <a href="./camelEndpointAmq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.2.</b>
                        
                         amq: endpoint
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2.3" data-path="camelEndpointFabric.html">
            
                
                    <a href="./camelEndpointFabric.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.3.</b>
                        
                         fabric: endpoint
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2.4" data-path="camelEndpointMaster.html">
            
                
                    <a href="./camelEndpointMaster.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.4.</b>
                        
                         master: endpoint
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="cxf.html">
            
                
                    <a href="./cxf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         Apache CXF
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.3.1" data-path="cxfFabric.html">
            
                
                    <a href="./cxfFabric.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.1.</b>
                        
                         CXF Fabric
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7.4" data-path="spring.html">
            
                
                    <a href="./spring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                         Spring framework
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="FAQ.html">
            
                
                    <a href="./FAQ.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         FAQ
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="faqGeneral.html">
            
                
                    <a href="./faqGeneral.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         General Questions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="faqUsing.html">
            
                
                    <a href="./faqUsing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         Questions On Using Fabric8
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.3" data-path="faqConfig.html">
            
                
                    <a href="./faqConfig.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                         Configuration Questions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.4" data-path="faqIssues.html">
            
                
                    <a href="./faqIssues.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                         Known Issues
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.4.1" data-path="faqOsgi.html">
            
                
                    <a href="./faqOsgi.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.1.</b>
                        
                         Questions on OSGi and Fabric8
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Fabric8 Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_47">
                    
                        <h2 id="profiles"><a name="profiles" class="anchor" href="#profiles"><span class="fa fa-link"></span></a>Profiles</h2>
<p>A profile is a description of how a logical group of containers needs to be provisioned. It contains a list of:</p>
<ul>
<li>System properties</li>
<li>OSGi Configuration Admin PIDs</li>
<li>Maven artifact repositories</li>
<li>Bundles</li>
<li>Karaf feature repositories</li>
<li>Features</li>
</ul>
<p>and also defines the OSGi framework that is going to be used.</p>
<p>Each profile can have none, one or more parents, and this allows you to have profile hierarchies and a container can be assigned to one or more profiles.
Profiles are also versioned, which allows you to keep different versions of each profile and then upgrade or rollback containers by changing the version of the profiles they use.</p>
<p>Each profile may also define none, one or more dependents. This allows a profile to specify any containers that must be active for it to start, an example would be requiring that
a MongoDB container is active so that a profile can use it as a database.</p>
<h3 id="profile-hierarchies"><a name="profile-hierarchies" class="anchor" href="#profile-hierarchies"><span class="fa fa-link"></span></a>Profile hierarchies</h3>
<p>It is quite often that multiple profiles share similar bits of configuration. Its quite common for different applications to use common frameworks libraries etc. Defining everything from the ground up for each profile can be a real pain and is not that easy to maintain.
To avoid having to duplicate configuration across profiles and reduce the required maintenance, Fabric uses a hierarchical model for profiles, which allows you to build a generic profile which contains common configuration and then inherit the common bits.</p>
<p>The section below describes the profiles that are shipped with Fabric out of the box and are a good example of how profile hierarchies work.</p>
<h3 id="out-of-the-box-profiles"><a name="out-of-the-box-profiles" class="anchor" href="#out-of-the-box-profiles"><span class="fa fa-link"></span></a>Out of the box profiles</h3>
<p>Fabric provides a rich set of profiles <em>&quot;out of the box&quot;</em> that can be used as the basic building blocks for defining your own profiles. The most important profiles are:</p>
<ul>
<li><strong>default</strong> The default profile defines all the basic stuff that fabric needs to run. For example it defines the <em>fabric-agent</em> feature, the fabric registry url &amp; the list of maven repositories that can be used to download artifacts from.</li>
<li><strong>karaf</strong> It is a child of <strong>default</strong> (so it doesn&apos;t need to define the same things again. It also defines the karaf feature repositories, that can be used for defining any karaf feature.</li>
<li><strong>camel</strong> It is a child of <strong>karaf</strong>. It also defines the camel feature repositories and some core camel features such as <em>camel-core</em> &amp; <em>camel-blueprint</em>. Any profile for describing camel application is suggested to inherit this one.</li>
<li><strong>cxf</strong> It is a child of <strong>karaf</strong>. It also defines the cxf feature repositories and some core cxf features. It is intended to be the parent of any profile that describes a cxf application.</li>
<li><strong>mq-base</strong> A profile that inherit the <strong>karaf</strong> profile and defines the  <em>mq-fabric</em> feature</li>
<li><strong>mq</strong> It is a child of the <strong>mq-base</strong> profile and it also provides a fuse mq broker configuration.</li>
<li><strong>esb</strong> It is a child of <strong>camel</strong>,<strong>mq</strong> &amp; more profiles and also defines the <em>Fuse ESB</em> feature repository.</li>
</ul>
<h3 id="profile-dependencies"><a name="profile-dependencies" class="anchor" href="#profile-dependencies"><span class="fa fa-link"></span></a>Profile dependencies</h3>
<p>A profile defines a dependency within a <code>io.fabric8.profile.dependency-[name].properties</code> file, where <code>[name]</code> can be any descriptive name for a particular dependency.</p>
<p>This is an example dependency defining that a container must exist with the MongoDB profile:</p>
<pre><code>kind = ZOOKEEPER_SERVICE
zookeeperPath = /fabric/registry/clusters/mongodb/default
summary = You must have a MongoDB instance running to be able to start this profile.
profileWildcards = mongodb
</code></pre><p><code>kind</code> only supports <code>ZOOKEEPER_SERVICE</code> as a method of determining whether a dependency is present.
<code>zookeeperPath</code> defines the path in the registry whose child nodes will be containers of the appropriate profile(s) for this dependency.
<code>profileWildcards</code> defines what profile ids to match on. If an id within <code>profileWildcards</code> is not contained within part of a profile id of the container, then no match is made.
<code>summary</code> specifies a message to be displayed in hawt.io when no dependent container is found.</p>
<p>Dependencies will attempt to match by <code>profileWildcards</code> first, and if no dependent container is found, it will then use <code>profileTags</code>. For a match to be made by <code>profileTags</code>, all the tags specified must be present on the profile of the dependent container. A match is still made if the dependent container has more tags than was defined in <code>profileTags</code>. </p>
<h3 id="changing-the-profile-of-a-container"><a name="changing-the-profile-of-a-container" class="anchor" href="#changing-the-profile-of-a-container"><span class="fa fa-link"></span></a>Changing the profile of a container</h3>
<p>At any given time you are able to change one of more of the profiles that are assigned to a container. You can use the <a href="commands/fabric-container-change-profile.html">fabric:container-change-profile</a> command as shown below:</p>
<pre><code>  fabric:container-change-profile mycontainer myprofile
</code></pre><p>The command above will assign the <strong>myprofile</strong> profile to <strong>mycontainer</strong>. All profiles previously assigned to the container will be removed. You can also specify multiple profiles to the container:</p>
<pre><code>   fabric:container-change-profile mycontainer myprofile myotherprofile
</code></pre><h3 id="creating-and-editing-profiles"><a name="creating-and-editing-profiles" class="anchor" href="#creating-and-editing-profiles"><span class="fa fa-link"></span></a>Creating and editing profiles</h3>
<p>To see the list of available profiles you can use the <strong>fabric:profile-list</strong>:</p>
<pre><code>    fabric:profile-list
</code></pre><p>The command will display all the profiles and also display their parents and the number of containers that currently make use of each profile:</p>
<pre><code>    [id]                                     [# containers] [parents]
    activemq-client                          0              default
    aws-ec2                                  0              cloud
    camel                                    0              karaf
    camel-jms                                0              camel, activemq-client
    cloud                                    0              karaf
    cloudservers-uk                          0              cloud
    cloudservers-us                          0              cloud
    cxf                                      0              karaf
    default                                  0
    dosgi                                    0              karaf
    example-camel                            0              karaf
    example-cxf                              0              cxf
    example-mq                               0              example-mq-base
    example-mq-base                          0              karaf
    example-mq-cluster                       0              example-mq-base
    fabric                                   1              karaf
    fmc                                      0              default
    hadoop                                   0              karaf
    hadoop-datanode                          0              hadoop
    hadoop-namenode                          0              hadoop
    hawtio                                   0              default
    insight                                  0              default
    insight-hdfs                             0              insight
    karaf                                    0              default
    mq                                       0              mq-base
    mq-base                                  0              karaf
    nmr                                      0              karaf
</code></pre><p>To see exactly what a profile defines you can use the <strong>fabric:profile-display</strong> command. For example let&apos;s take a look of what is defined in the camel profile.</p>
<pre><code>    fabric:profile-display camel
</code></pre><p>This command will display all information available for the camel profile:</p>
<pre><code>    Profile id: camel
    Version   : 1.0
    Parents   : karaf
    Associated Containers :

    Container settings
    ----------------------------
    Repositories :
        mvn:org.apache.camel.karaf/apache-camel/2.13.0/xml/features

    Features :
        camel-blueprint/2.13.0
        fabric-camel/1.1.0
        camel-core/2.13.0
</code></pre><p>Of course this command does not display what is inherited from the parents of the profile <em>(in this example the karaf profile)</em>. To unfold the profile hierarchy and also see the inherited configuration you can use the <strong>--overlay</strong> option:</p>
<pre><code>    fabric:profile-display --overlay camel
</code></pre><h4 id="creating-a-new-profile"><a name="creating-a-new-profile" class="anchor" href="#creating-a-new-profile"><span class="fa fa-link"></span></a>Creating a new profile</h4>
<p>In order to create a new profile that will describe how your application should be provisioned, you can use the <a href="commands/fabric-profile-create.html">fabric:profile-create</a> command.</p>
<pre><code>    fabric:profile-create myprofile
</code></pre><p>To specify one ore more parents to the profile you can use the <strong>--parents</strong> option:</p>
<pre><code>    fabric:profile-create --parents camel myprofile
</code></pre><p>As soon as the profile is created you can modify the profile, using the commands that are described in the following sections of the document.</p>
<h4 id="adding-or-removing-a-feature-to-a-profile"><a name="adding-or-removing-a-feature-to-a-profile" class="anchor" href="#adding-or-removing-a-feature-to-a-profile"><span class="fa fa-link"></span></a>Adding or removing a feature to a profile</h4>
<p>In order to edit one of the existing profile you can use the <a href="commands/fabric-profile-edit.html">fabric:profile-edit</a> command.</p>
<p>In this example I will use the profile-edit command to add the <em>camel-jclouds</em> feature to the <strong>camel</strong> profile.</p>
<pre><code>    fabric:profile-edit --features camel-jclouds camel
</code></pre><p>After the command I can display again the profile and see how the camel profile looks like now. You should now be able to see the <em>camel-jclouds</em> feature in the list of features of the <strong>camel</strong> profile.</p>
<pre><code>    Features :
        camel-jclouds
        camel-blueprint/2.13.0
        camel-core/2.13.0
        fabric-camel/1.1.0
</code></pre><p>If you want to remove a feature from the profile you can make use of the <strong>--delete</strong> option. So, if for example you need to remove the <em>camel-jclouds</em> feature:</p>
<pre><code>    fabric:profile-edit --delete --features camel-jclouds camel
</code></pre><h4 id="modifying-a-configuration-pid-in-a-profile"><a name="modifying-a-configuration-pid-in-a-profile" class="anchor" href="#modifying-a-configuration-pid-in-a-profile"><span class="fa fa-link"></span></a>Modifying a configuration pid in a profile</h4>
<p>A more complex example is when you need to modify a configuration pid of a profile. A configuration pid is actually a list of key value pairs. So to edit or add a new key value pair to a specific pid you can use the <strong>-pid</strong> and specify the pid and key value in the following format <em>pid/key=value</em>.
In the following example, I will modify the <em>io.fabric8.agent</em> pid and change the maven repository list. The default profile should contain a section like this:</p>
<pre><code>    Agent Properties :
          org.ops4j.pax.url.mvn.repositories= \
            http://repo1.maven.org/maven2@id=central, \
            https://repo.fusesource.com/nexus/content/groups/public@id=fusepublic, \
            https://repository.jboss.org/nexus/content/repositories/public@id=jbosspublic, \
            https://repo.fusesource.com/nexus/content/repositories/releases@id=jbossreleases, \
            https://repo.fusesource.com/nexus/content/groups/ea@id=jbossearlyaccess, \
            http://repository.springsource.com/maven/bundles/release@id=ebrreleases, \
            http://repository.springsource.com/maven/bundles/external@id=ebrexternal, \
            https://oss.sonatype.org/content/groups/scala-tools@id=scala
</code></pre><p>Let&apos;s see how we can change the Agent Properties section <em>(the agent properties is represented by the io.fabric8.agent pid that was mentioned above)</em>:</p>
<pre><code>             fabric:profile-edit --pid io.fabric8.agent/org.ops4j.pax.url.mvn.repositories=http://repositorymanager.mylocalnetwork.net default
</code></pre><p>Now the <a href="commands/fabric-profile-edit.html">fabric:profile-edit</a> command for the <strong>default</strong> profile should be similar to:</p>
<pre><code>             Agent Properties :
                   org.ops4j.pax.url.mvn.repositories = http://repositorymanager.mylocalnetwork.net
</code></pre><h3 id="profile-editor"><a name="profile-editor" class="anchor" href="#profile-editor"><span class="fa fa-link"></span></a>Profile Editor</h3>
<p>The profile edit command is quite flexible, however in some cases, you would really prefer a more traditional way of editing. Mainly because:</p>
<ul>
<li>You want to perform many changes at once</li>
<li>It feels more natural</li>
</ul>
<p>This is why fabric provides a profile editor embedded to your shell. You can use it, like:</p>
<pre><code>  fabric:profile-edit default (with no options)
</code></pre><p><img src="/images/profile-edit.png" alt="Opening the profile inside the editor"></p>
<p>The editor supports the basic editor functionality like undo, redo, forward/backward search, highlighting etc. What you are actually editing is the content of the io.fabric8.agent pid.
But you can use it to also edit any other pid or resource in your profile. For example to edit the io.fabric8.maven pid of the fabric profile, you can simply:</p>
<pre><code>  fabric:profile-edit --pid io.fabric8.maven fabric
</code></pre><p><img src="/images/profile-edit-pid.png" alt="Editing a pid"></p>
<p>A pretty similar approach applies to any resource under the profile. For example, to edit the broker.xml of the mq-base profile:</p>
<pre><code>  fabric:profile-edit --resource broker.xml mq-base
</code></pre><p><img src="/images/profile-edit-resource.png" alt="Editing a pid"></p>
<h3 id="profile-versions"><a name="profile-versions" class="anchor" href="#profile-versions"><span class="fa fa-link"></span></a>Profile versions</h3>
<p>Every profile has at least one version. When assigning a profile to a container, you actually assign both the profile and the version. The <a href="fabric-agent.html">fabric-agent</a>, will choose the defined version and retrieve all the information provided by the specific version of the profile.</p>
<p>Any change to a profile, will take immediate effect. This means that if there are containers that are assigned the version of a profile that was just modify will pick up the change immediately.
So it is recommended, to create a new version of a profile whenever you need to make changes and then assign the new version to the container. This allows you to complete your changes, test them and rollback to the previous version if you encounter issues.</p>
<h4 id="create-a-new-version"><a name="create-a-new-version" class="anchor" href="#create-a-new-version"><span class="fa fa-link"></span></a>Create a new version</h4>
<p>You are able to create a new version using the <a href="commands/fabric-version-create.html">fabric:version-create</a>. The default version is 1.0 so let&apos;s create 1.1.</p>
<pre><code>    fabric:version-create 1.1
</code></pre><p>Once the version has been created an instance of each profile has been created for the new version. To be more precise a copy of the latest version of each profile has been added to the new version.
Now you can display or modify the 1.1 version of each profile. Let&apos;s display the <strong>camel</strong> profile:</p>
<pre><code>    fabric:profile-display --version 1.1 camel
</code></pre><p>The output will be identical to the 1.0 version of the profile, since we haven&apos;t applied any change to the profile yet.</p>
<p>But how do we modify a specific version of profile?</p>
<p>All you need to do is to specify the version right after the profile argument. For example let&apos;s add the <em>camel-jclouds</em> component to version 1.1 of the <strong>camel</strong> profile:</p>
<pre><code>    fabric:profile-edit --features camel-jclouds camel 1.1
</code></pre><p>Please note, that this will not affect any of your existing container, not until you upgrade them to the 1.1 version.</p>
<h4 id="rolling-upgrades--rollbacks"><a name="rolling-upgrades--rollbacks" class="anchor" href="#rolling-upgrades--rollbacks"><span class="fa fa-link"></span></a>Rolling upgrades &amp; rollbacks</h4>
<p>Fabric provides commands for upgrading <em>(increasing the version)</em> and rolling back <em>(decreasing the version)</em> of the profiles assigned to a container. In order to upgrade a single container to the 1.1 version that we created in the previous section you can use the <a href="commands/fabric-container-upgrade.html">fabric:container-upgrade</a>. For example:</p>
<pre><code>    fabric:container-upgrade 1.1 mycontainer
</code></pre><p>The command above will make make <em>mycontainer</em> to use the version 1.1 of all the profiles that have been currently assigned to it.</p>
<p>If for any reason you wish to rollback to the previous version, you can make use of the <a href="commands/fabric-container-rollback.html">fabric:container-rollback</a> command.</p>
<pre><code>    fabric:container-rollback 1.1 mycontainer
</code></pre><p>That doesn&apos;t look like rolling, does it. You are strongly recommended to test your changes on a single container, before applying the changes to the whole cluster. Applying an upgrade to all containers can be achieved using the <strong>--all</strong> option as demonstrated below.</p>
<pre><code>      fabric:container-upgrade --all 1.1 mycontainer
</code></pre><h4 id="complete-walk-through"><a name="complete-walk-through" class="anchor" href="#complete-walk-through"><span class="fa fa-link"></span></a>Complete walk through</h4>
<p>The following clip demonstrates most of the profile concepts &amp; features described so far. It uses a small Fabric cluster of 5 containers on EC2, plus 1 Fabric registry.
It describe how to modify profiles and explains how to perform single and rolling container upgrades.</p>
<object width="853" height="480"><param name="movie" value="http://www.youtube.com/v/-2W5NwC2oAo?version=3&amp;hl=en_US&amp;rel=0"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><embed src="http://www.youtube.com/v/-2W5NwC2oAo?version=3&amp;hl=en_US&amp;rel=0" type="application/x-shockwave-flash" width="853" height="480" allowscriptaccess="always" allowfullscreen="true"></object>

<h4 id="importing-and-exporting-profiles"><a name="importing-and-exporting-profiles" class="anchor" href="#importing-and-exporting-profiles"><span class="fa fa-link"></span></a>Importing and exporting profiles</h4>
<p>There are cases where you have put quite a lot of effort in creating the profiles, so much that you want to package them up so that they can be stored or shared.
A good example is when you move from the development environment to the staging or the production environment. You simply just don&apos;t want to go over the process of creating the profiles again.
For such cases Fabric allows you export your profiles in text and also import them back. So you can safely store them or even import them to a version control system.</p>
<p>To export the Fabric profiles you can use the <a href="commands/fabric-export.html">fabric:profile-export</a></p>
<pre><code>     fabric:profile-export
</code></pre><p>This command will export all the profiles to files. The default export location is the fabric/export folder under the karaf home directory. To change the default location you just need to specify the path as an argument:</p>
<pre><code>     fabric:profile-export /path/to/my/export/location
</code></pre><p>In a similar way the import operation works. Please keep in mind that by default when creating a Fabric the <a href="commands/fabric-create.html">fabric:create</a> command will import everything it finds in fabric/import under the karaf home folder.</p>
<pre><code>    fabric:create
</code></pre><p>to specify an other folder for importing to the registry you can simply use the <strong>--import-dir</strong> option. For example:</p>
<pre><code>    fabric:create --import-dir /path/to/my/import/location
</code></pre><p>Of course there are cases where you need to import profiles after fabric has been created. You can use the the <a href="commands/fabric-import-profile.html">fabric:profile-import</a> as described below:</p>
<pre><code>    fabric:profile-import /path/to/my/profiles.zip
</code></pre><p>The <code>profile-import</code> command import profiles stored as zip files from url locations. You can also import using maven coordinates such as:</p>
<pre><code>    fabric:profile-import mvn:com.foo/mystuff/1.0/zip/profile
</code></pre><p>Fabric provides a Maven Plugin fabric8:zip which allows to export profiles to zips. Read  more about this at the Continues Deployment section.</p>
<p>Fabric provides the <a href="mavenPlugin.html">maven fabric8 plugin</a> supporting the <em>fabric8:zip</em> goal to export profiles to zips. This allows end users to develop projects, and easily export their projects as zips which can be imported into fabric. Read more about this at the <a href="continuousDeployment.html">continues deployment</a> section.</p>
<h4 id="importing-initial-profiles"><a name="importing-initial-profiles" class="anchor" href="#importing-initial-profiles"><span class="fa fa-link"></span></a>Importing initial profiles</h4>
<p>When fabric is started it imports an initial set of profiles from the <code>&lt;fabric_home&gt;/fabric/import</code> directory. </p>
<p>In addition fabric imports additional .zip files from the following two sources:</p>
<ol>
<li>.zip files which have been copied to the <code>&lt;fabric_home&gt;/fabric</code> directory. </li>
<li>.properties file which haven been copied to the <code>&lt;fabric_home&gt;/fabric</code> directory. </li>
</ol>
<p>In the .properties files, you specify url locations for .zip files to be imported. For example fabric uses this to import additional profiles such as the quickstarts, by having a <code>io.fabric8.import.profiles.properties</code> file with the following content</p>
<pre><code>importProfileURLs = ${env:FABRIC8_IMPORT_PROFILE_URLS?:mvn:io.fabric8.quickstarts/fabric8-quickstarts-parent/${version:fabric}/zip/profile}
</code></pre><p>The url above is using the <a href="http://fabric8.io/gitbook/propertyResolver.html#env" target="_blank">environment property resolver</a> to either load urls from the given environment variable, or if not provided, then use the default value which is <code>mvn:io.fabric8.quickstarts/fabric8-quickstarts-parent/${version:fabric}/zip/profile</code>. Notice how the url uses the <code>?:</code> elvis operator so we can lookup the environment variable, and if not given, then fallback and use the default value. The value <code>${version:fabric}</code> will get replaced with the version of fabric8. </p>
<p>The environment variable <code>FABRIC8_IMPORT_PROFILE_URLS</code> can be used to define custom profiles to be loaded instead of the quickstarts. Multiple urls are separated by a comma. For example to load two custom profiles instead of the quickstarts, then the environment can be configured with:</p>
<pre><code>export FABRIC8_IMPORT_PROFILE_URLS=&quot;mvn:com.foo/myprofiles/1.0,mvn:com.foo/myotherprofiles/1.0&quot;
</code></pre><h5 id="skipping-importing-some-folders"><a name="skipping-importing-some-folders" class="anchor" href="#skipping-importing-some-folders"><span class="fa fa-link"></span></a>Skipping importing some folders</h5>
<p>If for some reason you want to skip importing some folders (profiles) from a .zip file, you can include an empty <code>.skipimport</code> file in the folder to skip. </p>
<h5 id="disabling-quickstarts"><a name="disabling-quickstarts" class="anchor" href="#disabling-quickstarts"><span class="fa fa-link"></span></a>Disabling quickstarts</h5>
<p>The import of the quickstart profiles is easily disabled, by either deleting the <code>io.fabric8.import.profiles.properties</code> file, or disable the above line,  by prefixing the line with the <code>#</code> character, or setting the environment variable <code>FABRIC8_IMPORT_PROFILE_URLS</code> to the value <code>false</code>. </p>
<h4 id="documenting-profiles"><a name="documenting-profiles" class="anchor" href="#documenting-profiles"><span class="fa fa-link"></span></a>Documenting profiles</h4>
<p>A profile can include documentation by including the following files</p>
<ol>
<li><code>readme.md</code> - a readme file including the main documentation of the profile</li>
<li><code>summary.md</code> - an optional file for a quick summary of the profile.</li>
<li><code>icon.svg</code> or <code>icon.png</code> or <code>icon.jpg</code> - an optional graphical logo for the profile</li>
</ol>
<p>The profile can be viewed from the web console which will automatic include the above information if available.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./registry.html" class="navigation navigation-prev " aria-label="Previous page: Registry"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./agent.html" class="navigation navigation-next " aria-label="Next page: Agent"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
